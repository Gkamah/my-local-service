<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Provider Search & Details</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom styles for aesthetic enhancements */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f6f9;
        }
        .provider-card {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border-left: 5px solid transparent;
        }
        .provider-card:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        .provider-card.active {
            border-left-color: #8a2be2; /* Purple accent */
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto bg-white shadow-xl rounded-xl p-6">
        <h1 class="text-3xl font-bold text-[#1a1a40] mb-6 border-b pb-3">
            <i class="fas fa-search text-[#8a2be2] mr-2"></i> Find Local Service Providers
        </h1>

        <div class="flex flex-col md:flex-row gap-6">
            
            <!-- Left Panel: Provider List -->
            <div id="providerList" class="md:w-1/3 space-y-4 overflow-y-auto max-h-[80vh] pr-2">
                <h2 class="text-lg font-semibold text-[#434375] sticky top-0 bg-white z-10 py-1">Available Providers (Click to view profile)</h2>
                <!-- Provider cards will be rendered here -->
            </div>

            <!-- Right Panel: Detail View (The Dashboard view when clicked) -->
            <div id="detailView" class="md:w-2/3 p-6 bg-gray-50 border border-gray-200 rounded-lg shadow-inner min-h-[500px] flex items-center justify-center">
                <p class="text-gray-500 italic text-xl">Select a provider on the left to view their detailed profile.</p>
            </div>

        </div>
    </div>

    <script>
        // Mock Data simulating providers retrieved from the database
        const providers = [
            {
                id: 'p1',
                name: "Alex's Master Plumber",
                category: "Plumber",
                contactInfo: "+254 712 345 678",
                description: "Certified and experienced plumber specializing in emergency leak repair, pipe installation, and water heater maintenance. Available 24/7 in Nairobi area.",
                profilePictureUrl: "https://placehold.co/100x100/1a1a40/ffffff?text=AP"
            },
            {
                id: 'p2',
                name: "Sarah the Electrician",
                category: "Electrician",
                contactInfo: "+254 789 012 345",
                description: "Providing safe and reliable residential and commercial electrical services. Wiring, lighting installation, circuit breaker fixes, and full system upgrades.",
                profilePictureUrl: "https://placehold.co/100x100/434375/ffffff?text=SE"
            },
            {
                id: 'p3',
                name: "The Quick Carpenter Co.",
                category: "Carpenter",
                contactInfo: "+254 765 432 109",
                description: "Custom carpentry work, furniture repair, cabinet installation, and general wood construction. High-quality craftsmanship guaranteed.",
                profilePictureUrl: "https://placehold.co/100x100/8a2be2/ffffff?text=TC"
            }
        ];

        let activeProviderId = null;

        /**
         * Renders the list of providers in the left panel.
         */
        function renderProviders() {
            const listContainer = document.getElementById('providerList');
            let html = '<h2 class="text-lg font-semibold text-[#434375] sticky top-0 bg-white z-10 py-1">Available Providers (Click to view profile)</h2>';

            providers.forEach(provider => {
                const isActive = provider.id === activeProviderId ? 'active' : '';
                html += `
                    <div class="provider-card p-4 bg-white rounded-lg shadow-md flex items-center gap-4 ${isActive}" 
                         onclick="viewDetails('${provider.id}', this)">
                        <img src="${provider.profilePictureUrl}" 
                             alt="${provider.name}" 
                             class="w-16 h-16 rounded-full object-cover border-2 border-gray-300">
                        <div>
                            <h3 class="text-lg font-semibold text-[#1a1a40]">${provider.name}</h3>
                            <p class="text-sm text-gray-600"><i class="fas fa-tools mr-1 text-purple-500"></i>${provider.category}</p>
                        </div>
                    </div>
                `;
            });
            listContainer.innerHTML = html;
        }

        /**
         * Handles the click event to show provider details.
         * @param {string} id - The ID of the provider to display.
         * @param {HTMLElement} element - The clicked list item element for styling.
         */
        function viewDetails(id, element) {
            const provider = providers.find(p => p.id === id);
            const detailContainer = document.getElementById('detailView');
            
            // Highlight the active card
            document.querySelectorAll('.provider-card').forEach(card => card.classList.remove('active'));
            if (element) {
                element.classList.add('active');
            }
            activeProviderId = id;

            if (provider) {
                detailContainer.innerHTML = `
                    <div class="w-full">
                        <div class="flex items-center space-x-6 mb-6 pb-4 border-b border-gray-300">
                            <img src="${provider.profilePictureUrl}" 
                                 alt="${provider.name}'s Profile Picture" 
                                 class="w-24 h-24 rounded-full object-cover border-4 border-[#8a2be2] shadow-lg">
                            <div>
                                <h2 class="text-3xl font-bold text-[#1a1a40]">${provider.name}</h2>
                                <p class="text-xl text-[#434375] font-medium"><i class="fas fa-tools mr-2"></i> ${provider.category}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <h3 class="text-2xl font-semibold text-[#1a1a40] border-l-4 border-purple-500 pl-3">Services Offered</h3>
                            <p class="text-gray-700 leading-relaxed bg-white p-4 rounded-lg shadow-sm italic">
                                "${provider.description}"
                            </p>
                            
                            <h3 class="text-2xl font-semibold text-[#1a1a40] border-l-4 border-purple-500 pl-3 pt-4">Contact Information</h3>
                            <div class="bg-white p-4 rounded-lg shadow-sm space-y-2">
                                <p class="text-gray-700">
                                    <i class="fas fa-phone mr-3 text-green-600"></i> 
                                    <strong>Phone/WhatsApp:</strong> ${provider.contactInfo}
                                </p>
                                <p class="text-gray-700">
                                    <i class="fas fa-map-marker-alt mr-3 text-red-600"></i> 
                                    <strong>Location:</strong> Nairobi (Area determined by the application)
                                </p>
                                <button class="mt-4 w-full py-3 bg-[#1a1a40] text-white font-bold rounded-lg hover:bg-[#434375] transition duration-200">
                                    <i class="fas fa-comments mr-2"></i> Book This Service Provider
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                detailContainer.innerHTML = '<p class="text-gray-500 italic text-xl">Provider details not found.</p>';
            }
        }

        // Initialize the view on load
        document.addEventListener('DOMContentLoaded', () => {
            renderProviders();
            // Automatically select the first provider to show something on load
            if (providers.length > 0) {
                // Find the first card element after rendering
                const firstCard = document.querySelector('.provider-card');
                if (firstCard) {
                    viewDetails(providers[0].id, firstCard);
                }
            }
        });
    </script>
</body>
</html>
